# ADR-0003: Internal service communication strategy

- **Status**: Accepted
- **Date**: 2026-02-02

## Context
Сервисы должны общаться друг с другом. Есть две категории взаимодействий:
- синхронные запросы (например BFF -> auth)
- асинхронные события (ingestion, индексирование поиска, обновление агрегатов)

## Decision
- На старте допускаем **внутренние HTTP вызовы** между сервисами (REST-like), чтобы ускорить разработку.
- Контракты внутренних API фиксируем и стабилизируем.
- Для асинхронных сценариев используем message bus (см. ADR-0005).
- По мере роста критичных sync-вызовов мигрируем на **gRPC + protobuf** (контракты в `proto/*`).

## Consequences
### Positive
- быстрый старт и низкий порог входа
- миграция на gRPC возможна без смены внешнего REST

### Negative
- HTTP менее строгий к контрактам, чем protobuf
- потенциально больше накладных расходов и ошибок сериализации

## Alternatives considered
- Сразу gRPC везде: более строгие контракты, но выше стоимость старта и генерации SDK.
